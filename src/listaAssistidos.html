<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Assistidos</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <div id="reusohead">

    </div>
    <!-- reuso -->

</head>

<body>
    <header>
        <!-- Início código NavBar -->
        <div id="reusonavbar">

        </div>

        <!-- Fim da NavBar -->
        <!-- Início do código do início do site -->

        <h1 style="text-align:center">Assistidos Cadastrados</h1>
        <br>
        <!-- Search box -->
        <div class="input-group row col-md-6 offset-3">
            <input type="search" class="form-control rounded"
                placeholder="Digite aqui para procurar o cadastro de um assistido" aria-label="Search"
                aria-describedby="search-addon" />
            <button type="button" class="btn" style="background-color:#167bce;color:whitesmoke">Procurar</button>
        </div>
    </header>


    <br>
    <div class="d-flex justify-content-center">
        <div class="formulariopesq justify-itens">
            <div id="main">

            </div>
        </div>
    </div> <br>

    <!-- Fim do código do início do site -->


    <div id="reusofooter">

    </div>

    <script>
        $(document).ready(function () {
            $("#reusohead").load("reuso/head.html");
            $("#reusonavbar").load("reuso/navbar.html");
            $("#reusofooter").load("reuso/footer.html");
        })
    </script>

    <script>
        $(document).ready(() => {
            assistidos.list();
        });

        var assistidos = {

            list() {
                $.ajax({
                    url: 'http://127.0.0.1:3022/readCadastro',
                    type: 'GET',
                    success: data => {
                        data.forEach(element => {
                            console.log("entrei no ajax confia")
                            var tx = '';
                            tx +=
                                '<div class="insert" onclick="assistido.insert()"> Inserir </div>';
                            data.forEach(element => {
                                tx += '<div class="user">';
                                tx +=
                                    `<div style="display: inline-block;"> ${element.nome_completo}`;
                                tx += '<div class="actions">';
                                tx +=
                                    '<div class="action" onclick="assistido.update()"';
                                tx +=
                                    '<div class="action" onclick="assistido.delete(' +
                                    element.Nome +
                                    ')">Excluir</div></div></div></div>';
                            });
                            $('#main').html(tx);
                            console.log(tx + "era pra printar isso aqui")
                        })
                    }
                });
            }
        };
    </script>


</body>

</html>